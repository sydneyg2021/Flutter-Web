FROM mcr.microsoft.com/devcontainers/base:ubuntu

# Apt
RUN apt-get update && \
    apt-get install -y wget xz-utils git curl file unzip zip openjdk-17-jdk && \
    rm -rf /var/lib/apt/lists/*

# Flutter
RUN git clone -b master https://github.com/flutter/flutter.git /sdk/flutter
ENV PATH="/sdk/flutter/bin:${PATH}"

# Install Android SDK
RUN yes | /sdk/flutter/bin/flutter doctor --android-licenses
RUN /sdk/flutter/bin/flutter doctor --android-sdk=/opt/android-sdk

# Install Chrome
RUN apt-get update && apt-get install -y google-chrome-stable

# Install Linux toolchain
RUN apt-get update && apt-get install -y clang cmake ninja-build pkg-config

# Set environment variable for Chrome executable
ENV CHROME_EXECUTABLE=/usr/bin/google-chrome-stable